# -*- coding: utf-8 -*-
"""suc_Ollama_Multi-Tool_Agent.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1nAgP4mxMPqYrDP7oVgXrYIA4MWDwYjxs
"""





curl -fsSL https://ollama.com/install.sh | sh
nohup ollama serve &
ollama pull llama3:8b
ollama list

!curl -fsSL https://ollama.com/install.sh | sh

!pip install ollama duckduckgo-search beautifulsoup4 requests

ollama run llama3:8b

!nohup ollama serve &
!ollama pull llama3:8b

!ollama list

import os
import json
from ollama import Client
from duckduckgo_search import DDGS
import requests
from bs4 import BeautifulSoup

# ุฅุนุฏุงุฏ ุนููู Ollama
ollama_client = Client(host='http://localhost:11434')

# ุฏุงูุฉ ุงูุจุญุซ ูู ุงูุฅูุชุฑูุช
def search_internet(query):
    print(f"๐ ุงูุจุญุซ ูู ุงูุฅูุชุฑูุช ุนู: {query}")
    ddgs = DDGS()
    results = ddgs.text(query, max_results=3)
    return results

# ุฏุงูุฉ ุงูุจุญุซ ูู ุงูููุจููุชุฑ ุงููุญูู
def search_local(query):
    print(f"๐ป ุงูุจุญุซ ูู ุงูููุจููุชุฑ ุงููุญูู ุนู: {query}")
    search_dir = os.path.expanduser("~")  # ุชุจุฏุฃ ุงูุจุญุซ ูู ูุฌูุฏ ุงููุณุชุฎุฏู ุงูุฑุฆูุณู
    results = []

    for root, dirs, files in os.walk(search_dir):
        for file in files:
            if query.lower() in file.lower():
                results.append(os.path.join(root, file))
        if len(results) >= 5:  # ุญุฏ ุฃูุตู ูููุชุงุฆุฌ
            break
    return results

# ุฏุงูุฉ ุงุณุชุฎุฑุงุฌ ุงููุต ูู ุตูุญุฉ ููุจ
def extract_text_from_url(url):
    try:
        response = requests.get(url, timeout=5)
        soup = BeautifulSoup(response.text, 'html.parser')
        return soup.get_text()[:500]  # ุฃูู 500 ุญุฑู
    except:
        return "ูุดู ุงุณุชุฎุฑุงุฌ ุงููุญุชูู"

# ุฏุงูุฉ ุชุญุฏูุฏ ููุน ุงูุจุญุซ ุจุงุณุชุฎุฏุงู Ollama
def decide_search_type(query):
    prompt = f"""
    ุฃูุช ูููู ุฐูู. ุจูุงุกู ุนูู ุงูุงุณุชูุณุงุฑ ุงูุชุงููุ ุญุฏุฏ ูุง ุฅุฐุง ูุงู ุงูุจุญุซ ูุฌุจ ุฃู ูููู:
    - "local" (ูู ุงูููุจููุชุฑ ุงููุญููุ ูุซู ุงูุจุญุซ ุนู ูููุงุช ุฃู ูุณุชูุฏุงุช)
    - "internet" (ูู ุงูุฅูุชุฑูุชุ ูุซู ุงูุจุญุซ ุนู ูุนูููุงุช ุนุงูุฉ ุฃู ุฃุฎุจุงุฑ)
    - "none" (ูุง ูุชุทูุจ ุจุญุซูุง)

    ุงูุงุณุชูุณุงุฑ: "{query}"
    ุฃุฌุจ ุจูููุฉ ูุงุญุฏุฉ ููุท: local ุฃู internet ุฃู none.
    """
    response = ollama_client.generate(model='llama3:8b', prompt=prompt)
    return response['response'].strip().lower()

# ุฏุงูุฉ ุชูููุฐ ุงูุจุญุซ ุจูุงุกู ุนูู ุงูููุน
def execute_search(query):
    search_type = decide_search_type(query)

    if search_type == "local":
        results = search_local(query)
        if results:
            return f"๐ ุชู ุงูุนุซูุฑ ุนูู ุงููููุงุช ุงูุชุงููุฉ:\n" + "\n".join(results)
        else:
            return "โ ูู ูุชู ุงูุนุซูุฑ ุนูู ูููุงุช ูุทุงุจูุฉ."

    elif search_type == "internet":
        search_results = search_internet(query)
        if search_results:
            response = "๐ ูุชุงุฆุฌ ุงูุจุญุซ ุนูู ุงูุฅูุชุฑูุช:\n"
            for result in search_results:
                title = result.get('title', 'ุจุฏูู ุนููุงู')
                link = result.get('href', '#')
                snippet = result.get('body', 'ูุง ููุฌุฏ ูุตู')
                response += f"\n- {title}\n  {link}\n  {snippet}\n"
            return response
        else:
            return "โ ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุงุฆุฌ ุนูู ุงูุฅูุชุฑูุช."

    else:
        return "โน๏ธ ุงูุงุณุชูุณุงุฑ ูุง ูุชุทูุจ ุจุญุซูุง."

# ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ
if __name__ == "__main__":
    print("๐ค ูููู Ollama ูุชุนุฏุฏ ุงูุฃุฏูุงุช")
    print("ุงูุชุจ ุงุณุชูุณุงุฑู ุฃู ุงูุชุจ 'ุฎุฑูุฌ' ููุฅููุงุก.")

    while True:
        user_input = input("\n> ")
        if user_input.lower() in ['ุฎุฑูุฌ', 'exit', 'quit']:
            break

        response = execute_search(user_input)
        print(response)

import os
import json
from ollama import Client
from duckduckgo_search import DDGS
import requests
from bs4 import BeautifulSoup

# ุฅุนุฏุงุฏ ุนููู Ollama
ollama_client = Client(host='http://localhost:11434')

# ุฏุงูุฉ ุงูุจุญุซ ูู ุงูุฅูุชุฑูุช
def search_internet(query):
    print(f"๐ ุงูุจุญุซ ูู ุงูุฅูุชุฑูุช ุนู: {query}")
    ddgs = DDGS()
    results = ddgs.text(query, max_results=3)
    return results

# ุฏุงูุฉ ุงูุจุญุซ ูู ุงูููุจููุชุฑ ุงููุญูู
def search_local(query):
    print(f"๐ป ุงูุจุญุซ ูู ุงูููุจููุชุฑ ุงููุญูู ุนู: {query}")
    search_dir = os.path.expanduser("~")  # ุชุจุฏุฃ ุงูุจุญุซ ูู ูุฌูุฏ ุงููุณุชุฎุฏู ุงูุฑุฆูุณู
    results = []

    for root, dirs, files in os.walk(search_dir):
        for file in files:
            if query.lower() in file.lower():
                results.append(os.path.join(root, file))
        if len(results) >= 5:  # ุญุฏ ุฃูุตู ูููุชุงุฆุฌ
            break
    return results

# ุฏุงูุฉ ุงุณุชุฎุฑุงุฌ ุงููุต ูู ุตูุญุฉ ููุจ
def extract_text_from_url(url):
    try:
        response = requests.get(url, timeout=5)
        soup = BeautifulSoup(response.text, 'html.parser')
        return soup.get_text()[:500]  # ุฃูู 500 ุญุฑู
    except:
        return "ูุดู ุงุณุชุฎุฑุงุฌ ุงููุญุชูู"

# ุฏุงูุฉ ุชุญุฏูุฏ ููุน ุงูุจุญุซ ุจุงุณุชุฎุฏุงู Ollama
def decide_search_type(query):
    prompt = f"""
    You are an intelligent agent. Based on the following query, determine whether the search should be:
    - "local" (on the local computer, such as searching for files or documents)
    - "internet" (on the Internet, such as searching for general information or news)
    - "none" (does not require a search)

    ุงูุงุณุชูุณุงุฑ: "{query}"
    ุฃุฌุจ ุจูููุฉ ูุงุญุฏุฉ ููุท: local ุฃู internet ุฃู none.
    """
    response = ollama_client.generate(model='llama3:8b', prompt=prompt)
    return response['response'].strip().lower()

# ุฏุงูุฉ ุชูููุฐ ุงูุจุญุซ ุจูุงุกู ุนูู ุงูููุน
def execute_search(query):
    search_type = decide_search_type(query)

    if search_type == "local":
        results = search_local(query)
        if results:
            return f"๐ ุชู ุงูุนุซูุฑ ุนูู ุงููููุงุช ุงูุชุงููุฉ:\n" + "\n".join(results)
        else:
            return "โ ูู ูุชู ุงูุนุซูุฑ ุนูู ูููุงุช ูุทุงุจูุฉ."

    elif search_type == "internet":
        search_results = search_internet(query)
        if search_results:
            response = "๐ ูุชุงุฆุฌ ุงูุจุญุซ ุนูู ุงูุฅูุชุฑูุช:\n"
            for result in search_results:
                title = result.get('title', 'ุจุฏูู ุนููุงู')
                link = result.get('href', '#')
                snippet = result.get('body', 'ูุง ููุฌุฏ ูุตู')
                response += f"\n- {title}\n  {link}\n  {snippet}\n"
            return response
        else:
            return "โ ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุงุฆุฌ ุนูู ุงูุฅูุชุฑูุช."

    else:
        return "โน๏ธ ุงูุงุณุชูุณุงุฑ ูุง ูุชุทูุจ ุจุญุซูุง."

# ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ
if __name__ == "__main__":
    print("๐ค ูููู Ollama ูุชุนุฏุฏ ุงูุฃุฏูุงุช")
    print("ุงูุชุจ ุงุณุชูุณุงุฑู ุฃู ุงูุชุจ 'ุฎุฑูุฌ' ููุฅููุงุก.")

    while True:
        user_input = input("\n> ")
        if user_input.lower() in ['ุฎุฑูุฌ', 'exit', 'quit']:
            break

        response = execute_search(user_input)
        print(response)

import os
import json
from ollama import Client
from duckduckgo_search import DDGS
import requests
from bs4 import BeautifulSoup

# ุฅุนุฏุงุฏ ุนููู Ollama
ollama_client = Client(host='http://localhost:11434')

# ุฏุงูุฉ ุงูุจุญุซ ูู ุงูุฅูุชุฑูุช
def search_internet(query):
    print(f"๐ ุงูุจุญุซ ูู ุงูุฅูุชุฑูุช ุนู: {query}")
    ddgs = DDGS()
    results = ddgs.text(query + " latest news", max_results=3)
    return results

# ุฏุงูุฉ ุงูุจุญุซ ูู ุงูููุจููุชุฑ ุงููุญูู
def search_local(query):
    print(f"๐ป ุงูุจุญุซ ูู ุงูููุจููุชุฑ ุงููุญูู ุนู: {query}")

    # ุฅุฐุง ูุงู ุงูุงุณุชูุณุงุฑ ูุญุชูู ุนูู ูุณุงุฑ ูุทูู ูุซู /content/sample_data
    if query.startswith("/"):
        search_dir = query
    else:
        search_dir = "/content"  # ุงููุณุงุฑ ุงูุงูุชุฑุงุถู ูู Colab

    results = []

    if os.path.exists(search_dir):
        for root, dirs, files in os.walk(search_dir):
            for file in files:
                if query.lower() in file.lower():
                    results.append(os.path.join(root, file))
            if len(results) >= 5:  # ุญุฏ ุฃูุตู ูููุชุงุฆุฌ
                break
    else:
        return f"โ ุงููุณุงุฑ '{search_dir}' ุบูุฑ ููุฌูุฏ."

    if results:
        return f"๐ ุชู ุงูุนุซูุฑ ุนูู ุงููููุงุช ุงูุชุงููุฉ:\n" + "\n".join(results)
    else:
        return "โ ูู ูุชู ุงูุนุซูุฑ ุนูู ูููุงุช ูุทุงุจูุฉ."

# ุฏุงูุฉ ุงุณุชุฎุฑุงุฌ ุงููุต ูู ุตูุญุฉ ููุจ
def extract_text_from_url(url):
    try:
        response = requests.get(url, timeout=5)
        soup = BeautifulSoup(response.text, 'html.parser')
        return soup.get_text()[:500]  # ุฃูู 500 ุญุฑู
    except:
        return "ูุดู ุงุณุชุฎุฑุงุฌ ุงููุญุชูู"

# ุฏุงูุฉ ุชุญุฏูุฏ ููุน ุงูุจุญุซ ุจุงุณุชุฎุฏุงู Ollama
def decide_search_type(query):
    prompt = f"""
    ุฃูุช ูููู ุฐูู. ุจูุงุกู ุนูู ุงูุงุณุชูุณุงุฑ ุงูุชุงููุ ุญุฏุฏ ูุง ุฅุฐุง ูุงู ุงูุจุญุซ ูุฌุจ ุฃู ูููู:
    - "local" (ูู ุงูููุจููุชุฑ ุงููุญููุ ูุซู ุงูุจุญุซ ุนู ูููุงุช ุฃู ูุณุชูุฏุงุช)
    - "internet" (ูู ุงูุฅูุชุฑูุชุ ูุซู ุงูุจุญุซ ุนู ูุนูููุงุช ุนุงูุฉ ุฃู ุฃุฎุจุงุฑ)
    - "none" (ูุง ูุชุทูุจ ุจุญุซูุง)

    ุงูุงุณุชูุณุงุฑ: "{query}"
    ุฃุฌุจ ุจูููุฉ ูุงุญุฏุฉ ููุท: local ุฃู internet ุฃู none.
    """
    response = ollama_client.generate(model='llama3', prompt=prompt)
    return response['response'].strip().lower()

# ุฏุงูุฉ ุชูููุฐ ุงูุจุญุซ ุจูุงุกู ุนูู ุงูููุน
def execute_search(query):
    search_type = decide_search_type(query)

    if search_type == "local":
        return search_local(query)

    elif search_type == "internet":
        search_results = search_internet(query)
        if search_results:
            response = "๐ ูุชุงุฆุฌ ุงูุจุญุซ ุนูู ุงูุฅูุชุฑูุช:\n"
            for result in search_results:
                title = result.get('title', 'ุจุฏูู ุนููุงู')
                link = result.get('href', '#')
                snippet = result.get('body', 'ูุง ููุฌุฏ ูุตู')
                response += f"\n- {title}\n  {link}\n  {snippet}\n"
            return response
        else:
            return "โ ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุงุฆุฌ ุนูู ุงูุฅูุชุฑูุช."

    else:
        return "โน๏ธ ุงูุงุณุชูุณุงุฑ ูุง ูุชุทูุจ ุจุญุซูุง."

# ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ
if __name__ == "__main__":
    print("๐ค ูููู Ollama ูุชุนุฏุฏ ุงูุฃุฏูุงุช")
    print("ุงูุชุจ ุงุณุชูุณุงุฑู ุฃู ุงูุชุจ 'ุฎุฑูุฌ' ููุฅููุงุก.")

    while True:
        user_input = input("\n> ")
        if user_input.lower() in ['ุฎุฑูุฌ', 'exit', 'quit']:
            break

        response = execute_search(user_input)
        print(response)

!nohup ollama serve &

import os
import json
from ollama import Client
from duckduckgo_search import DDGS
import requests
from bs4 import BeautifulSoup

# Setup Ollama client
ollama_client = Client(host='http://localhost:11434')

# Function to search the internet
def search_internet(query):
    print(f"๐ Searching the internet for: {query}")
    ddgs = DDGS()
    results = ddgs.text(query + " latest news", max_results=3)
    return results

# Function to search the local computer
def search_local(query):
    print(f"๐ป Searching locally for: {query}")

    # If the query contains an absolute path like /content/sample_data
    if query.startswith("/"):
        search_dir = query
    else:
        search_dir = "/content"  # Default path in Colab

    results = []

    if os.path.exists(search_dir):
        for root, dirs, files in os.walk(search_dir):
            for file in files:
                if query.lower() in file.lower():
                    results.append(os.path.join(root, file))
            if len(results) >= 5:  # Max results limit
                break
    else:
        return f"โ Path '{search_dir}' does not exist."

    if results:
        return f"๐ Found the following files:\n" + "\n".join(results)
    else:
        return "โ No matching files found."

# Function to extract text from a webpage
def extract_text_from_url(url):
    try:
        response = requests.get(url, timeout=5)
        soup = BeautifulSoup(response.text, 'html.parser')
        return soup.get_text()[:500]  # First 500 characters
    except:
        return "Failed to extract content"

# Function to decide search type using Ollama
def decide_search_type(query):
    prompt = f"""
    You are an intelligent agent. Based on the following query, determine if the search should be:
    - "local" (on the local computer, like searching for files or documents)
    - "internet" (on the internet, like searching for general information or news)
    - "none" (no search needed)

    Query: "{query}"
    Answer with only one word: local, internet, or none.
    """
    response = ollama_client.generate(model='llama3:8b]', prompt=prompt)
    return response['response'].strip().lower()

# Function to execute search based on type
def execute_search(query):
    search_type = decide_search_type(query)

    if search_type == "local":
        return search_local(query)

    elif search_type == "internet":
        search_results = search_internet(query)
        if search_results:
            response = "๐ Internet search results:\n"
            for result in search_results:
                title = result.get('title', 'No title')
                link = result.get('href', '#')
                snippet = result.get('body', 'No description')
                response += f"\n- {title}\n  {link}\n  {snippet}\n"
            return response
        else:
            return "โ No results found on the internet."

    else:
        return "โน๏ธ The query does not require a search."

# Main user interface
if __name__ == "__main__":
    print("๐ค Ollama Multi-Tool Agent")
    print("Enter your query or type 'exit' to quit.")

    while True:
        user_input = input("\n> ")
        if user_input.lower() in ['exit', 'quit']:
            break

        response = execute_search(user_input)
        print(response)

!nohup ollama serve &
import os
import json
from ollama import Client
from duckduckgo_search import DDGS
import requests
from bs4 import BeautifulSoup

# Setup Ollama client
ollama_client = Client(host='http://localhost:11434')

# Function to search the internet
def search_internet(query):
    print(f"๐ Searching the internet for: {query}")
    ddgs = DDGS()
    results = ddgs.text(query + " latest news", max_results=3)
    return results

# Function to search the local computer
def search_local(query):
    print(f"๐ป Searching locally for: {query}")

    # If the query contains an absolute path like /content/sample_data
    if query.startswith("/"):
        search_dir = query
    else:
        search_dir = "/content"  # Default path in Colab

    results = []

    if os.path.exists(search_dir):
        for root, dirs, files in os.walk(search_dir):
            for file in files:
                # Check if the query mentions a file extension like 'csv'
                if 'csv' in query.lower() and file.endswith('.csv'):
                    results.append(os.path.join(root, file))
                elif query.lower() in file.lower():
                    results.append(os.path.join(root, file))
            if len(results) >= 5:  # Max results limit
                break
    else:
        return f"โ Path '{search_dir}' does not exist."

    if results:
        return f"๐ Found the following files:\n" + "\n".join(results)
    else:
        return "โ No matching files found."

# Function to extract text from a webpage
def extract_text_from_url(url):
    try:
        response = requests.get(url, timeout=5)
        soup = BeautifulSoup(response.text, 'html.parser')
        return soup.get_text()[:500]  # First 500 characters
    except:
        return "Failed to extract content"

# Function to decide search type using Ollama
def decide_search_type(query):
    prompt = f"""
    You are an intelligent agent. Based on the following query, determine if the search should be:
    - "local" (on the local computer, like searching for files or documents)
    - "internet" (on the internet, like searching for general information or news)
    - "none" (no search needed)

    Query: "{query}"
    Answer with only one word: local, internet, or none.
    """
    response = ollama_client.generate(model='llama3:8b', prompt=prompt)
    return response['response'].strip().lower()

# Function to execute search based on type
def execute_search(query):
    search_type = decide_search_type(query)

    if search_type == "local":
        return search_local(query)

    elif search_type == "internet":
        search_results = search_internet(query)
        if search_results:
            response = "๐ Internet search results:\n"
            for result in search_results:
                title = result.get('title', 'No title')
                link = result.get('href', '#')
                snippet = result.get('body', 'No description')
                response += f"\n- {title}\n  {link}\n  {snippet}\n"
            return response
        else:
            return "โ No results found on the internet."

    else:
        return "โน๏ธ The query does not require a search."

# Main user interface
if __name__ == "__main__":
    print("๐ค Ollama Multi-Tool Agent")
    print("Enter your query or type 'exit' to quit.")

    while True:
        user_input = input("\n> ")
        if user_input.lower() in ['exit', 'quit']:
            break

        response = execute_search(user_input)
        print(response)

"""๐๏ธ ุชุญุณููุงุช ููุชุฑุญุฉ ูุณุชูุจููุง
ุฅุฐุง ุฃุฑุฏุชุ ูููููุง ุชุญุณูู ุงููููู ุฃูุซุฑุ ูุซู:

ุชุญุณูู ุฌูุฏุฉ ุงูุจุญุซ ุนูู ุงูุฅูุชุฑูุช ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ุฃูุซุฑ ุชุฎุตุตูุง ุฃู ุชุนุฏูู ุงูุงุณุชุนูุงูุงุช.
ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃุฏูุงุช ูุซู ุงูุจุญุซ ูู ููุงุนุฏ ุงูุจูุงูุงุช ุฃู ูุฑุงุกุฉ ูุญุชูู ุงููููุงุช.
ุฅุถุงูุฉ ูุงุฌูุฉ ุฑุณูููุฉ (GUI) ูุณูููุฉ ุงูุงุณุชุฎุฏุงู.

https://chat.z.ai/c/aba22008-bd6c-4366-9b06-8b0fe6584739
"""

